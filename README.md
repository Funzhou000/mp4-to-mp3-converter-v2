# C语言批量音频提取工具 (Batch Audio Extractor in C)

这是一个使用C语言编写的Windows命令行工具，旨在作为一个深入学习C语言与操作系统交互的实践项目。程序能够自动扫描所在目录，批量将所有的 `.mp4` 视频文件转换为 `.mp3` 音频文件。

## 📝 项目简介

本项目源于一个重新点燃编程热情的想法，从一个只能转换单个文件的简单脚本开始，逐步升级为一个健壮的、能够批量处理文件的命令行程序。它通过调用强大的 `FFmpeg` 库来实现核心的音视频转换功能。

整个开发过程涉及了从解决环境问题、学习Windows API、处理字符串边缘情况，到最终实现完整业务逻辑的全过程，是一次宝贵的学习经历。

## ✨ 主要功能

* **自动扫描**：无需手动指定，程序会自动扫描其所在目录下的所有文件。
* **智能识别**：通过检查文件后缀，精准识别出 `.mp4` 文件进行处理，并能正确处理包含多个 `.` 的复杂文件名。
* **类型安全**：能够区分文件和文件夹，即使文件夹以 `.mp4` 结尾，也会被安全跳过。
* **批量处理**：一次运行，即可转换目录下所有的视频文件，大大提高效率。
* **实时反馈**：在终端中清晰地打印出当前正在转换的文件和最终的转换统计结果。

## 🚀 如何使用

### **先决条件**

1.  **C语言编译器**: 需要一个C语言编译器，如 `GCC` (通过 MinGW 或 MSYS2 在 Windows 上安装)。
2.  **FFmpeg**: 需要下载 FFmpeg，并将其 `bin` 目录添加到系统的 `PATH` 环境变量中。

### **编译与运行**

1.  将本项目的所有文件（主要是 `converter.c`）放在一个文件夹内。
2.  将需要转换的 `.mp4` 视频文件也放入同一个文件夹。
3.  打开终端（如 PowerShell 或 CMD），`cd` 到该文件夹目录下。
4.  **编译程序**：
    ```bash
    gcc converter.c -o converter.exe
    ```
5.  **运行程序**：
    ```bash
    ./converter.exe
    ```
6.  程序将自动开始转换，请耐心等待所有任务完成。

## 🧠 学习之旅与核心知识点

这个项目虽小，但却涵盖了从底层到应用的大量关键知识点。

### 1. 与 Windows API 交互
本项目深度实践了如何使用 `windows.h` 头文件与Windows操作系统进行交互，以实现标准C库无法完成的功能。
* **文件查找会话**: 理解了通过 `FindFirstFile` 和 `FindNextFile` 配合 `HANDLE` 句柄进行会话式文件查找的机制。
* **`WIN32_FIND_DATA` 结构体**: 学会了使用 `struct` 来接收操作系统返回的、包含文件名、文件属性等多种信息的复杂数据。

### 2. C语言核心概念
* **结构体 (Struct)**: 通过 `findData.cFileName` 和 `findData.dwFileAttributes` 的使用，深入理解了如何访问结构体成员。
* **字符串处理**:
    * `strcpy`: 用于安全地复制字符串，以创建可修改的文件名副本。
    * `strrchr`: 学习了如何使用此函数从右向左查找字符，以精准定位文件名的最后一个 `.`，这是处理文件后缀的专业方法。
    * `strcmp`: 用于比较字符串，以准确判断文件后缀是否为 `.mp4`。
    * `snprintf`: 学习了如何使用它安全、灵活地构建最终要执行的命令行字符串。

### 3. 程序设计
* **批量处理逻辑**: 掌握了使用 `do-while` 循环来遍历 `FindNextFile` 返回结果的核心设计模式。
* **健壮性与边缘情况**: 在编程中养成了思考边缘情况的习惯，例如：
    * 如何区分文件名和文件夹名 (`dwFileAttributes & FILE_ATTRIBUTE_DIRECTORY`)。
    * 如何处理 `my.video.mp4` 这种包含多个点的文件名。

## 🔮 未来计划

当前版本是一个功能完整的命令行工具。下一步计划是为其开发一个图形用户界面 (GUI)，使其成为一个更易于使用的桌面软件。

- [ ] **Level 3: 图形用户界面 (GUI) 应用**
    - [ ] 使用 Python (`Tkinter` 库) 构建图形界面。
    - [ ] 实现文件拖拽功能。
    - [ ] 在界面上显示文件列表和转换进度。
    - [ ] 将 C 语言核心与 Python 界面打包成独立的 `.exe` 程序。

---
*这份 README 由 Gemini 根据2025年9月21日的学习内容整理。*
